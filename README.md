<div align="center">

# ğŸŒŠ AstrBot Plugin Rhythm
### æ‹ŸäººåŒ–å›å¤èŠ‚å¥ Â· æ¶ˆæ¯é˜²æŠ– Â· æ­£æ€åˆ†å¸ƒå»¶è¿Ÿ

[![AstrBot](https://img.shields.io/badge/AstrBot-Plugin-purple?style=flat-square)](https://github.com/Soulter/AstrBot)
[![Python](https://img.shields.io/badge/Python-3.10%2B-blue?style=flat-square)](https://www.python.org/)
[![Status](https://img.shields.io/badge/Status-Active-green?style=flat-square)]()

**è®© AI ä¸å†æœºæ¢°ç§’å›ï¼Œè€Œæ˜¯åƒçœŸäººä¸€æ ·æ‹¥æœ‰é˜…è¯»ã€æ€è€ƒå’Œæ‰“å­—çš„å‘¼å¸æ„Ÿã€‚**

</div>

---

åŸºäº `ctrlkk/astrbot_plugin_chat_buffer` è¿›è¡Œæ·±åº¦æ”¹é€ ï¼Œä¸“ä¸ºè¿½æ±‚æè‡´**æ‹Ÿäººæ„Ÿ (Human-like)** çš„è§’è‰²æ‰®æ¼”åœºæ™¯è®¾è®¡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

1.  **ğŸ“¨ æ™ºèƒ½æ¶ˆæ¯åˆå¹¶ (Debounce)**
    * å½»åº•è§£å†³ AI é¢å¯¹ç”¨æˆ·è¿ç»­å‘å‡ºçš„çŸ­å¥ï¼ˆå¦‚â€œåœ¨å—â€ã€â€œæˆ‘æƒ³ä½ äº†â€ã€â€œåˆšä¸‹ç­â€ï¼‰æ—¶ï¼Œæ¯å¥éƒ½å›å¤å¯¼è‡´çš„åˆ·å±é—®é¢˜ã€‚
    * å®ƒä¼šåƒçœŸäººä¸€æ ·ï¼Œâ€œå¬â€ä½ è¯´å®Œä¸€æ®µè¯ï¼Œå†ç»Ÿä¸€å›å¤ã€‚

2.  **ğŸ² æ­£æ€åˆ†å¸ƒéšæœºå»¶è¿Ÿ (Gaussian Delay)** ğŸ†•
    * **å‘Šåˆ«æœºæ¢°å®šæ—¶**ï¼šä¼ ç»Ÿçš„å»¶è¿Ÿæ˜¯å›ºå®šçš„ï¼ˆä¾‹å¦‚æ°¸è¿œç­‰å¾… 10 ç§’ï¼‰ï¼Œå®¹æ˜“è¢«è¯†ç ´ã€‚
    * **æ¨¡æ‹Ÿç”Ÿç‰©é’Ÿ**ï¼šæœ¬æ’ä»¶å¼•å…¥é«˜æ–¯æ­£æ€åˆ†å¸ƒç®—æ³•ã€‚å¦‚æœä½ è®¾å®š 15 ç§’ï¼ŒAI å¯èƒ½ä¼šåœ¨ 13.5 ç§’å›ï¼Œä¹Ÿå¯èƒ½åœ¨ 17.2 ç§’å›ï¼Œæ¨¡æ‹ŸçœŸäººçš„æ‰“å­—é€Ÿåº¦æ³¢åŠ¨ã€‚

3.  **ğŸ›ï¸ é«˜åº¦å¯é…ç½®**
    * æ”¯æŒé€šè¿‡ WebUI æˆ–å¯¹è¯æŒ‡ä»¤å®æ—¶è°ƒæ•´åŸºå‡†ç­‰å¾…æ—¶é—´å’Œæ³¢åŠ¨å¹…åº¦ã€‚

## ğŸ“¦ å®‰è£…æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šç›´æ¥å…‹éš† (æ¨è)

è¿›å…¥ AstrBot çš„ `plugins` ç›®å½•ï¼š

```bash
cd data/plugins
git clone [https://github.com/ä½ çš„ç”¨æˆ·å/astrbot-rhythm.git](https://github.com/ä½ çš„ç”¨æˆ·å/astrbot-rhythm.git)
# å»ºè®®é‡å‘½åæ–‡ä»¶å¤¹ä»¥ç¬¦åˆè§„èŒƒ (å¯é€‰)
mv astrbot-rhythm astrbot_plugin_rhythm
```

é‡å¯ AstrBot å³å¯ç”Ÿæ•ˆã€‚

## âš™ï¸ é…ç½®è¯´æ˜

ä½ å¯ä»¥åœ¨ AstrBot WebUI çš„æ’ä»¶é…ç½®é¡µç›´æ¥ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ç¼–è¾‘ `config.json`ã€‚

| é…ç½®é¡¹ | å­—æ®µå | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :--- | :--- | :--- |
| **åŸºå‡†ç­‰å¾…æ—¶é—´** | `debounce_wait` | int | 10 | æ¨¡æ‹Ÿâ€œé˜…è¯»+æ€è€ƒ+æ‰“å­—â€çš„å¹³å‡è€—æ—¶ï¼ˆç§’ï¼‰ã€‚å»ºè®®è®¾ä¸º **15~20**ã€‚ |
| **éšæœºæ³¢åŠ¨ç³»æ•°** | `jitter` | float | 0.25 | æ§åˆ¶æ—¶é—´çš„éšæœºç¨‹åº¦ (0.0~1.0)ã€‚**æ¨è 0.25**ã€‚ |

### å…³äºæ³¢åŠ¨ç³»æ•° (Jitter) çš„é€šä¿—è§£é‡Š

ç®—æ³•å…¬å¼ï¼š`å®é™…ç­‰å¾…æ—¶é—´ = NormalDistribution(å‡å€¼=wait, æ ‡å‡†å·®=wait * jitter)`

* **Jitter = 0.0**: ğŸ¤– æœºå™¨äººæ¨¡å¼ã€‚è®¾å®š 10ç§’ï¼Œæ°¸è¿œ 10ç§’ å›å¤ã€‚
* **Jitter = 0.25 (æ¨è)**: ğŸ‘©ğŸ» çœŸäººæ¨¡å¼ã€‚è®¾å®š 15ç§’ï¼Œå¤§éƒ¨åˆ†å›å¤åœ¨ **11s ~ 19s** ä¹‹é—´æµ®åŠ¨ã€‚
* **Jitter = 0.5**: ğŸ›Œ æ…µæ‡’/å¿™ç¢Œæ¨¡å¼ã€‚è®¾å®š 15ç§’ï¼Œå›å¤æ—¶é—´æä¸ç¨³å®šï¼Œå¯èƒ½ 7ç§’ å›ï¼Œä¹Ÿå¯èƒ½ 23ç§’ å›ã€‚

## ğŸ’¬ æŒ‡ä»¤åˆ—è¡¨

| æŒ‡ä»¤ | ç¤ºä¾‹ | æè¿° |
| :--- | :--- | :--- |
| `/å¼€å…³é˜²æŠ–` | `/å¼€å…³é˜²æŠ–` | å¼€å¯æˆ–å…³é—­æœ¬æ’ä»¶åŠŸèƒ½ã€‚ |
| `/è®¾ç½®é˜²æŠ–æ—¶é—´` | `/è®¾ç½®é˜²æŠ–æ—¶é—´ 15` | è®¾ç½®åŸºå‡†ç­‰å¾…æ—¶é—´ä¸º 15 ç§’ã€‚ |
| `/è®¾ç½®æ³¢åŠ¨` | `/è®¾ç½®æ³¢åŠ¨ 0.3` | è®¾ç½®éšæœºæ³¢åŠ¨ç³»æ•°ä¸º 0.3ã€‚ |

## ğŸ› ï¸ é€»è¾‘åŸç†å›¾è§£

```mermaid
graph TD
    A[ç”¨æˆ·å‘é€æ¶ˆæ¯1] --> B{ç¼“å†²æ± }
    B --> C[é‡ç½®è®¡æ—¶å™¨ (åŸºäºæ­£æ€åˆ†å¸ƒ)]
    C -->|è®¡æ—¶ä¸­...| D[ç”¨æˆ·å‘é€æ¶ˆæ¯2]
    D --> B
    B --> E[é‡ç½®è®¡æ—¶å™¨ (é‡æ–°è®¡ç®—éšæœºå€¼)]
    E -->|è®¡æ—¶ç»“æŸ| F[åˆå¹¶æ‰€æœ‰æ¶ˆæ¯]
    F --> G[å‘é€ç»™ LLM]
    G --> H[AI å›å¤]
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1.  **å†²çªæ£€æµ‹**ï¼šè¯·ä¸è¦åŒæ—¶å®‰è£… `astrbot_plugin_chat_buffer` (åŸç‰ˆ) å’Œæœ¬æ’ä»¶ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ¶ˆæ¯è¢«å¤„ç†ä¸¤æ¬¡æˆ–é€»è¾‘å†²çªã€‚
2.  **æ—¥å¿—æŸ¥çœ‹**ï¼šæ’ä»¶ä¼šåœ¨æ§åˆ¶å°æ‰“å°æ—¥å¿— `[è‹äº‘ä¹…] æ­£åœ¨è¾“å…¥... (åŸºå‡†:15s | å®é™…:14.2s)`ï¼Œæ–¹ä¾¿ä½ è°ƒè¯•æœ€ä½³èŠ‚å¥ã€‚

## ğŸ“œ é¸£è°¢

* æœ¬æ’ä»¶ Fork è‡ª [ctrlkk/astrbot_plugin_chat_buffer](https://github.com/ctrlkk/astrbot_plugin_chat_buffer)ï¼Œæ„Ÿè°¢åŸä½œè€…çš„ä¼˜ç§€å·¥ä½œã€‚
* ç‰¹åˆ«æ„Ÿè°¢ **Google Gemini** æä¾›æ ¸å¿ƒç®—æ³•ä¼˜åŒ–æ€è·¯ä¸ä»£ç é‡æ„å»ºè®®ã€‚

---
